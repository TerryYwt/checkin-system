import{_ as R,r as l,o as b,d as n,f as r,g,h as i,w as c,i as _,E as p,j as s,k as x,m as u,t as k}from"./index-46149a81.js";const Q={class:"qrcode"},C={class:"card-header"},q={class:"qrcode-content"},U={class:"qrcode-info"},B={class:"text-muted"},L={__name:"QRCode",setup(D){const a=l(""),d=l(""),m=async()=>{try{const e=await _.get("/user/qrcode");a.value=e.data.qrcodeUrl,d.value=e.data.lastUpdated}catch{p.error("獲取 QR 碼失敗")}},v=async()=>{if(a.value)try{const e=await _.get("/user/qrcode/download",{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),o=document.createElement("a");o.href=t,o.setAttribute("download","my-qrcode.png"),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(t)}catch{p.error("下載 QR 碼失敗")}},y=e=>e?new Date(e).toLocaleString():"未知";return b(()=>{m()}),(e,t)=>{const o=n("el-button"),f=n("el-image"),w=n("el-empty"),h=n("el-card");return r(),g("div",Q,[i(h,{class:"box-card"},{header:c(()=>[s("div",C,[t[1]||(t[1]=s("span",null,"我的 QR 碼",-1)),i(o,{type:"primary",onClick:v},{default:c(()=>t[0]||(t[0]=[x("下載 QR 碼")])),_:1})])]),default:c(()=>[s("div",q,[a.value?(r(),u(f,{key:0,src:a.value,"preview-src-list":[a.value],fit:"contain",style:{width:"300px",height:"300px"}},null,8,["src","preview-src-list"])):(r(),u(w,{key:1,description:"暫無 QR 碼"}))]),s("div",U,[t[2]||(t[2]=s("p",null,"掃描此 QR 碼進行簽到",-1)),s("p",B,"最後更新時間："+k(y(d.value)),1)])]),_:1})])}}},j=R(L,[["__scopeId","data-v-873ea9f9"]]);export{j as default};
